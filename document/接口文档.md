## 返回 json格式统一说明

包含以下属性

```java
T data			//T为泛型的类型标记
String msg      //返回的信息（错误原因等）
int ResultCode	//状态码，现在定义了四种，如下
```

ResultCode取值情况如下

```java
public interface ResultCode {
    int success=1;
    int fail=2;
    int exception=3;
    int abnormal=4;
}
```



## 接口

### 域名

47.93.218.244

### 基本震情接口

##### 1、上传基本震情的json文件

类型：get

URL：/disasterUpload

参数：file

参数类型：MultipartFile

返回：

```json
success情况
{
    "msg": "success",
    "data": "none",
    "ResultCode": 1
}
```

```json
abnormal情况
{
    "msg": "no file",
    "data": "none",
    "ResultCode": 4
}
```

```json
exception情况
{
    "msg": "json data is out of standard",
    "data": "none",
    "ResultCode": 3
}
```



##### 2、拿到全部的disaster，带搜索，分页

类型：get

URL：/getDisaster

参数：

```java
String key
Integer page
Integer limit
```

返回：

```json
{
    "code": 0,				//状态码
    "msg": "",				//信息，基本用不到
    "count": 5,				//总共查询到的个数
    "data": [				//下面是当前页的数据
        {
            "id": 154,
            "unifiedId": "501",
            "province": "安徽",
            "city": "马鞍山",
            "country": "当涂县",
            "town": "",
            "village": "",
            "date": "2020-07-03 12:54:21",
            "location": "安徽马鞍山当涂县",
            "longitude": 10.0,
            "latitude": 20.0,
            "depth": 1.0,
            "magnitude": 2.0,
            "picture": "/disaster/154.jpg",			//这个图片可以通过 【域名+picture显示】
            "reportingUnit": null,
            "did": "34052100000020200703125421"
        }
    ]
}
```

##### 3、根据ID删除disaster

类型：delete

URL：/deleteDisasterInfoById

参数：

```java
int id			//基本震情的ID
```

返回：

```json
{				//失败
    "msg": "the id doesn't exist",
    "data": "none",
    "ResultCode": 4
}
```

```json
{				//成功
    "msg": "delete success",
    "data": "none",
    "ResultCode": 1
}
```

##### 4、根据ID修改disaster

类型：get

URL：/updateDisasterInfoById

参数：

```java
int id,
String province,
String city,
String country,
String town,
String village,
String date,
double longiude,
double latitude,
float depth,
float magnitude,
String reportingUnit,
MultipartFile file    			//需要修改图片的话
```

返回：

/updateDisasterInfoById?id=154&province=安徽&city=马鞍山&country=当涂县&town=姑孰镇&village=&date=2020-04-03 12:54:21&longiude=10&latitude=20&depth=1&magnitude=2&reportingUnit=当涂地震局

```json
{
    "msg": "update success",
    "data": "none",
    "ResultCode": 1
}
```

/updateDisasterInfoById?id=154&province=安徽省&city=马鞍山&country=当涂县&town=姑孰镇&village=&date=2020-04-03 12:54:21&longiude=10&latitude=20&depth=1&magnitude=2&reportingUnit=当涂地震局

```json
{
    "msg": "the location or date is invalid",
    "data": "none",
    "ResultCode": 4
}
```

##### 5、添加新的disaster

类型：get

URL：/addDisasterInfo

参数：

```java
MultipartFile file,			//图片文件同时上传，前端检查一下文件大小
String province,
String city,
String country,
String town,
String village,
String date,
double longiude,
double latitude,
float depth,
float magnitude,
String reportingUnit
```

返回：（body里面还有multipartfile）

/addDisasterInfo?province=安徽&city=马鞍山&country=当涂县&town=&village=&date=2020-07-03 12:54:21&longiude=10&latitude=20&depth=1&magnitude=2& reportingUnit=当涂地震局

```json
{
    "msg": "add success",
    "data": {
        "id": 142					//插入数据的ID号
    },
    "ResultCode": 1
}
```

/addDisasterInfo?province=安徽省&city=马鞍山&country=当涂县&town=&village=&date=2020-07-03 12:54:21&longiude=10&latitude=20&depth=1&magnitude=2& reportingUnit=当涂地震局

```json
{
    "msg": "the location or date is invalid",
    "data": "none",
    "ResultCode": 4
}
```

